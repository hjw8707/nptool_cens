# STARK

## 1. Introduction

The STARK detector system consists of silicon detector assemblies such as X6, BB10, and QQQ5. It is used for detecting various particles and measuring their positions and energies. Each detector can be positioned using different coordinate systems (Cartesian, spherical, cylindrical), allowing flexible arrangement for experimental setups.

## 2. Detector File (.detector)

The STARK section in the `.detector` file defines the main parameters such as type, position, orientation, and resolution for each detector. Each block starts with "STARK" and can include the following parameters:

### Main Parameters

- **Type**: Detector type (`X6`, `BB10`, `QQQ5`)
- **POS**: Position in Cartesian coordinates (e.g., `POS = 0 0 100 mm`)
- **R, Theta, Phi**: Position in spherical coordinates (e.g., `R = 100 mm`, `Theta = 45 deg`, `Phi = 0 deg`)
- **Rho, Phi, Z**: Position in cylindrical coordinates (e.g., `Rho = 50 mm`, `Phi = 90 deg`, `Z = 0 mm`)
- **Flip**: Flip along Y-axis (`0` or `1`)
- **Rev**: Reverse along Z-axis (`0` or `1`)
- **Beta**: Additional rotation angle (`deg`)
- **Group**: Group number (optional)
- **Reso**: Energy resolution (%) (e.g., `Reso = 1.0`)

### Example .detector file

```txt
STARK
 Type = X6
 POS = 0 0 100 mm
 Flip = 0
 Rev = 0
 Beta = 0 deg
 Group = 1

STARK
 Type = BB10
 R = 120 mm
 Theta = 45 deg
 Phi = 0 deg
 Flip = 1
 Rev = 0
 Beta = 0 deg

STARK
 Type = QQQ5
 Rho = 80 mm
 Phi = 90 deg
 Z = 0 mm
 Flip = 0
 Rev = 1
 Beta = 45 deg

STARK
 Type = X6
 Reso = 1.0
```

> **Note:**
>
> - Use only one coordinate system among POS (Cartesian), R/Theta/Phi (spherical), or Rho/Phi/Z (cylindrical) for each detector.
> - The Reso block sets the energy resolution for the specified type.

## 3. Output Data Structure from npsimulation (TSTARKData)

The `TSTARKData` class stores the raw event data generated by the STARK detector. The main member variables are as follows:

| Variable Name         | Type              | Description                                 |
|----------------------|-------------------|---------------------------------------------|
| fDetectorType        | vector`<int>`       | Detector type (0: X6, 1: BB10, 2: QQQ5)     |
| fDetectorNumber      | vector`<int>`       | Detector number                             |
| fFrontStrip          | vector`<int>`       | Front strip number                          |
| fBackStrip           | vector`<int>`       | Back strip number                           |
| fFrontEnergy         | vector`<double>`    | Front energy (MeV)                          |
| fBackEnergy          | vector`<double>`    | Back energy (MeV)                           |
| fUpstreamEnergy      | vector`<double>`    | Upstream energy (MeV, only for X6)          |
| fDownstreamEnergy    | vector`<double>`    | Downstream energy (MeV, only for X6)        |
| fTime                | vector`<double>`    | Signal time (ns)                            |
| fPosX                | vector`<double>`    | Hit position X (mm)                         |
| fPosY                | vector`<double>`    | Hit position Y (mm)                         |
| fPosZ                | vector`<double>`    | Hit position Z (mm)                         |

Since multiple hits can occur in each event, all variables are managed as vectors.

### Example for X6 detector

| Variable Name        | Example Value (X6) |
|---------------------|--------------------|
| fDetectorType       | 0                  |
| fDetectorNumber     | 1                  |
| fFrontStrip         | 32                 |
| fBackStrip          | 16                 |
| fFrontEnergy        | 5.2                |
| fBackEnergy         | 5.1                |
| fUpstreamEnergy     | 0.0                |
| fDownstreamEnergy   | 0.0                |
| fTime               | 123.4              |
| fPosX               | 10.0               |
| fPosY               | 5.0                |
| fPosZ               | 100.0              |

## 4. Notes

- The coordinate system for each detector type may differ, so choose the appropriate one for your experimental setup.
- The Reso (resolution) setting affects experimental accuracy, so set it according to the actual detector characteristics.
- Flip, Rev, and Beta are used to adjust the detector orientation.
